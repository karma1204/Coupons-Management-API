{"openapi":"3.1.0","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/api/coupons/{id}":{"get":{"tags":["coupon-controller"],"operationId":"getCouponById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"400":{"description":"Bad Request","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CouponResponse"}}}}}},"put":{"tags":["coupon-controller"],"operationId":"updateCoupon","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCouponRequest"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CouponResponse"}}}}}},"delete":{"tags":["coupon-controller"],"operationId":"deleteCoupon","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"400":{"description":"Bad Request","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK"}}}},"/api/coupons":{"get":{"tags":["coupon-controller"],"operationId":"getCoupons","parameters":[{"name":"offset","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":20}},{"name":"active","in":"query","required":false,"schema":{"type":"boolean"}},{"name":"code","in":"query","required":false,"schema":{"type":"string"}},{"name":"type","in":"query","required":false,"schema":{"type":"string","enum":["BUY_X_GET_Y","CART_WISE_PERCENTAGE","CART_WISE_FLAT_AMOUNT"]}}],"responses":{"400":{"description":"Bad Request","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CouponsResponse"}}}}}},"post":{"tags":["coupon-controller"],"operationId":"createCoupon","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCouponRequest"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CouponResponse"}}}}}}},"/api/applicable-coupons":{"get":{"tags":["coupon-application-controller"],"operationId":"getApplicableCouponsForCart","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartRequest"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApplicableCouponsResponse"}}}}}}}},"components":{"schemas":{"ProblemDetail":{"type":"object","properties":{"type":{"type":"string","format":"uri"},"title":{"type":"string"},"status":{"type":"integer","format":"int32"},"detail":{"type":"string"},"instance":{"type":"string","format":"uri"},"properties":{"type":"object","additionalProperties":{}}}},"BuyXGetYRulesRequest":{"type":"object","properties":{"buyProducts":{"type":"array","items":{"$ref":"#/components/schemas/ProductQuantityDTO"},"minItems":1,"uniqueItems":true},"getProducts":{"type":"array","items":{"$ref":"#/components/schemas/ProductQuantityDTO"},"minItems":1,"uniqueItems":true},"repetitionLimit":{"type":"integer","format":"int32","minimum":1}},"required":["buyProducts","getProducts"]},"CartWiseRuleRequest":{"type":"object","properties":{"thresholdAmount":{"type":"number","format":"double","minimum":1},"percentageDiscount":{"type":"number","format":"double"},"maxDiscountAmount":{"type":"number","format":"double"},"flatDiscountAmount":{"type":"number","format":"double"},"repetitionLimit":{"type":"integer","format":"int32","minimum":1}}},"CreateCouponRequest":{"type":"object","properties":{"type":{"type":"string","enum":["BUY_X_GET_Y","CART_WISE_PERCENTAGE","CART_WISE_FLAT_AMOUNT"]},"name":{"type":"string","maxLength":100,"minLength":0},"code":{"type":"string","maxLength":20,"minLength":0},"details":{"type":"string","minLength":1},"active":{"type":"boolean"},"validFrom":{"type":"string","format":"date-time"},"validTill":{"type":"string","format":"date-time"},"buyXGetYRules":{"type":"array","items":{"$ref":"#/components/schemas/BuyXGetYRulesRequest"}},"cartWiseRule":{"$ref":"#/components/schemas/CartWiseRuleRequest"},"validFromInFuture":{"type":"boolean"},"validTillAfterValidFrom":{"type":"boolean"}},"required":["active","code","details","name","type","validFrom"]},"ProductQuantityDTO":{"type":"object","properties":{"productId":{"type":"string","format":"uuid"},"quantity":{"type":"integer","format":"int32","minimum":1}},"required":["productId"]},"BuyXGetYRulesResponse":{"type":"object","properties":{"buyProducts":{"type":"array","items":{"$ref":"#/components/schemas/ProductQuantity"},"uniqueItems":true},"getProducts":{"type":"array","items":{"$ref":"#/components/schemas/ProductQuantity"},"uniqueItems":true},"repetitionLimit":{"type":"integer","format":"int32"}}},"CartWiseRule":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"thresholdAmount":{"type":"number","format":"double"},"percentageDiscount":{"type":"number","format":"double"},"maxDiscountAmount":{"type":"number","format":"double"},"flatDiscountAmount":{"type":"number","format":"double"},"maxApplications":{"type":"integer","format":"int32"}}},"CouponResponse":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"type":{"type":"string","enum":["BUY_X_GET_Y","CART_WISE_PERCENTAGE","CART_WISE_FLAT_AMOUNT"]},"name":{"type":"string"},"code":{"type":"string"},"details":{"type":"string"},"active":{"type":"boolean"},"validFrom":{"type":"string","format":"date-time"},"validTill":{"type":"string","format":"date-time"},"buyXGetYRules":{"type":"array","items":{"$ref":"#/components/schemas/BuyXGetYRulesResponse"}},"cartWiseRule":{"$ref":"#/components/schemas/CartWiseRule"}}},"ProductQuantity":{"type":"object","properties":{"productId":{"type":"string","format":"uuid"},"quantity":{"type":"integer","format":"int32"}}},"CouponsResponse":{"type":"object","properties":{"coupons":{"type":"array","items":{"$ref":"#/components/schemas/CouponResponse"}},"totalCount":{"type":"integer","format":"int32"},"hasMoreResults":{"type":"boolean"}}},"CartItemRequest":{"type":"object","properties":{"productId":{"type":"string","format":"uuid"},"quantity":{"type":"integer","format":"int32","minimum":1},"price":{"type":"number","format":"double"}},"required":["productId"]},"CartRequest":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/CartItemRequest"}},"cartTotal":{"type":"number","format":"double"}}},"ApplicableCouponItemDto":{"type":"object","properties":{"couponId":{"type":"string","format":"uuid"},"type":{"type":"string","enum":["BUY_X_GET_Y","CART_WISE_PERCENTAGE","CART_WISE_FLAT_AMOUNT"]},"discountAmount":{"type":"number","format":"double"}}},"ApplicableCouponsResponse":{"type":"object","properties":{"applicableCoupons":{"type":"array","items":{"$ref":"#/components/schemas/ApplicableCouponItemDto"}}}}}}}